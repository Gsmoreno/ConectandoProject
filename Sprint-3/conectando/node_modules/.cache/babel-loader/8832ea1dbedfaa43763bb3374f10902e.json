{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gugus\\\\Desktop\\\\Conectando\\\\Sprint-3\\\\conectando\\\\src\\\\pages\\\\login\\\\index.tsx\";\nimport React, { useEffect } from 'react';\nimport Input from '../../components/inputs/index';\nimport conectandoImg from \"../../assets/images/LogoSemFundo.svg\";\nimport senaiImg from \"../../assets/images/logoVermelho.svg\";\nimport './styles.css';\nimport { Link, useHistory } from 'react-router-dom';\nimport api from '../../services/api';\nimport { Formik, Form } from 'formik';\nimport jwtDecode from 'jwt-decode';\n\nfunction Login() {\n  let history = useHistory();\n  useEffect(() => {\n    localStorage.clear();\n  }, []);\n  return /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      entrada: '',\n      senha: ''\n    },\n    onSubmit: (data, {\n      setSubmitting\n    }) => {\n      setSubmitting(true);\n      api.post('/login', data).then(res => {\n        if (res.data.token !== undefined) {\n          localStorage.setItem('conectando-key-auth', res.data.token);\n          history.push('/listaVagas');\n          const authDec = jwtDecode(`Bearer ${res.data.token}`);\n          const role = authDec[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\n\n          if (role === \"Aluno\") {\n            history.push('/vagasAluno');\n          } else if (role === \"Empresa\") {\n            history.push('/perfilEmpresa');\n          } else if (role === \"Administrador\") {\n            history.push('/listaAluno');\n          }\n        } else {\n          localStorage.clear();\n          alert(\"Senha ou email incorretos!\");\n        }\n      }).catch(error => console.log(error));\n      setSubmitting(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }, ({\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"containerLogin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: conectandoImg,\n    alt: \"Logo conectando\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: senaiImg,\n    alt: \"Logo senai vermelho\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"E-mail / CPF / CNPJ\",\n    name: \"entrada\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    label: \"Senha\",\n    name: \"senha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }, \"Entrar\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, \"N\\xE3o tem cadastro?\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, \"Entre como\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/cadastroempresa\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 41\n    }\n  }, \"\\xA0EMPRESA\\xA0\"), \" ou \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/cadastroaluno\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 99\n    }\n  }, \"\\xA0ALUNO\\xA0\")))));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/gugus/Desktop/Conectando/Sprint-3/conectando/src/pages/login/index.tsx"],"names":["React","useEffect","Input","Link","useHistory","api","Formik","Form","jwtDecode","Login","history","localStorage","clear","entrada","senha","data","setSubmitting","post","then","res","token","undefined","setItem","push","authDec","role","alert","catch","error","console","log","isSubmitting","conectandoImg","senaiImg"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,+BAAlB;;;AAIA,OAAO,cAAP;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,QAA7B;AACA,OAAOC,SAAP,MAAsB,YAAtB;;AAIA,SAASC,KAAT,GAAiB;AAEb,MAAIC,OAAO,GAAGN,UAAU,EAAxB;AAEJH,EAAAA,SAAS,CAAC,MAAI;AACVU,IAAAA,YAAY,CAACC,KAAb;AACH,GAFQ,EAEP,EAFO,CAAT;AAII,sBACI,oBAAC,MAAD;AAEI,IAAA,aAAa,EACT;AACIC,MAAAA,OAAO,EAAE,EADb;AAEIC,MAAAA,KAAK,EAAE;AAFX,KAHR;AAOI,IAAA,QAAQ,EAAE,CAACC,IAAD,EAAO;AAAEC,MAAAA;AAAF,KAAP,KAA6B;AACnCA,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAX,MAAAA,GAAG,CAACY,IAAJ,CAAS,QAAT,EAAmBF,IAAnB,EACKG,IADL,CACUC,GAAG,IAAI;AACT,YAAIA,GAAG,CAACJ,IAAJ,CAASK,KAAT,KAAmBC,SAAvB,EAAkC;AAC9BV,UAAAA,YAAY,CAACW,OAAb,CAAqB,qBAArB,EAA4CH,GAAG,CAACJ,IAAJ,CAASK,KAArD;AAEAV,UAAAA,OAAO,CAACa,IAAR,CAAa,aAAb;AAEA,gBAAMC,OAAW,GAAGhB,SAAS,CAAE,UAASW,GAAG,CAACJ,IAAJ,CAASK,KAAM,EAA1B,CAA7B;AACA,gBAAMK,IAAI,GAAGD,OAAO,CAAC,8DAAD,CAApB;;AACA,cAAIC,IAAI,KAAK,OAAb,EAAsB;AAClBf,YAAAA,OAAO,CAACa,IAAR,CAAa,aAAb;AACH,WAFD,MAGK,IAAIE,IAAI,KAAK,SAAb,EAAwB;AACzBf,YAAAA,OAAO,CAACa,IAAR,CAAa,gBAAb;AACH,WAFI,MAGA,IAAIE,IAAI,KAAK,eAAb,EAA8B;AAC/Bf,YAAAA,OAAO,CAACa,IAAR,CAAa,aAAb;AACH;AAEJ,SAjBD,MAiBO;AACHZ,UAAAA,YAAY,CAACC,KAAb;AACAc,UAAAA,KAAK,CAAC,4BAAD,CAAL;AACH;AACJ,OAvBL,EAuBOC,KAvBP,CAuBaC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAvBtB;AAwBIZ,MAAAA,aAAa,CAAC,KAAD,CAAb;AACP,KAlCL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAqCK,CAAC;AAAGe,IAAAA;AAAH,GAAD,kBACG;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,GAAG,EAAEC,aAAV;AAAyB,IAAA,GAAG,EAAC,iBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAK,IAAA,GAAG,EAAEC,QAAV;AAAoB,IAAA,GAAG,EAAC,qBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,eAKI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,qBAAb;AAAmC,IAAA,IAAI,EAAC,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,KAAK,EAAC,OAA7B;AAAqC,IAAA,IAAI,EAAC,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAEF,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,CAFJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BARJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAgB,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAhB,uBAA0E,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,gBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA1E,CATJ,CALJ,CAtCR,CADJ;AA4DH;;AAED,eAAetB,KAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Input from '../../components/inputs/index';\r\nimport conectandoImg from '../../assets/images/LogoSemFundo.svg';\r\nimport senaiImg from '../../assets/images/logoVermelho.svg';\r\n\r\nimport './styles.css';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport api from '../../services/api';\r\nimport { Formik, Form } from 'formik';\r\nimport jwtDecode from 'jwt-decode';\r\nimport { Token } from '../Felipe/perfil';\r\n\r\n\r\nfunction Login() {\r\n\r\n    let history = useHistory();\r\n\r\nuseEffect(()=>{\r\n    localStorage.clear();\r\n},[])\r\n\r\n    return (\r\n        <Formik\r\n\r\n            initialValues={\r\n                {\r\n                    entrada: '',\r\n                    senha: '',\r\n                }}\r\n            onSubmit={(data, { setSubmitting }) => {\r\n                setSubmitting(true);\r\n                api.post('/login', data)\r\n                    .then(res => {\r\n                        if (res.data.token !== undefined) {\r\n                            localStorage.setItem('conectando-key-auth', res.data.token)\r\n\r\n                            history.push('/listaVagas')\r\n\r\n                            const authDec:any = jwtDecode(`Bearer ${res.data.token}`);\r\n                            const role = authDec[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\r\n                            if (role === \"Aluno\") {\r\n                                history.push('/vagasAluno');\r\n                            }\r\n                            else if (role === \"Empresa\") {\r\n                                history.push('/perfilEmpresa');\r\n                            }\r\n                            else if (role === \"Administrador\") {\r\n                                history.push('/listaAluno');\r\n                            }\r\n\r\n                        } else {\r\n                            localStorage.clear();\r\n                            alert(\"Senha ou email incorretos!\")\r\n                        }\r\n                    }).catch(error => console.log(error));\r\n                    setSubmitting(false);\r\n            }}\r\n\r\n        >\r\n            {({  isSubmitting }) => (\r\n                <div className=\"containerLogin\">\r\n                    <div className=\"logos\">\r\n                        <img src={conectandoImg} alt=\"Logo conectando\" />\r\n                        <img src={senaiImg} alt=\"Logo senai vermelho\" />\r\n                    </div>\r\n                    <div className=\"form\">\r\n                        <h1>Login</h1>\r\n                        <Form >\r\n                            <Input label=\"E-mail / CPF / CNPJ\" name=\"entrada\" />\r\n                            <Input type=\"password\" label=\"Senha\" name=\"senha\" />\r\n                            <button type=\"submit\" disabled={isSubmitting} >Entrar</button>\r\n                        </Form>\r\n\r\n                        <span>Não tem cadastro?</span>\r\n                        <span>Entre como<Link to=\"/cadastroempresa\">&nbsp;EMPRESA&nbsp;</Link> ou <Link to=\"/cadastroaluno\">&nbsp;ALUNO&nbsp;</Link></span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </Formik>\r\n\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}